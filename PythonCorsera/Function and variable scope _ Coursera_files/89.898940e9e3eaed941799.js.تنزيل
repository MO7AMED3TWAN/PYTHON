(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{"+GB+":function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),r=t.n(n),a=t("q1tI"),i=t.n(a),o=t("8WNh"),s=t("b1i5"),u=t("VkAN"),c=t.n(u),d=t("AeFk"),l=t("7GkZ"),m=t("wd/R"),g=t.n(m),p=t("17x9"),h=t.n(p),f=t("F/us"),b=t.n(f),v=t("WFBc"),k=t("kvW3"),I=t("sQ/U"),y=t("8Hdl"),S=t("6/Gu"),T=t("ZJgU"),O=t("jPyl"),j=t("aFpJ"),w=t("uJqh"),A=t("O+1n"),C=t("+2ZD"),P=t("K7Vu"),N="onDemandProgrammingGradedScriptTokens.v1",L={get:function get(e){var t=e.itemId,n=e.courseId,r=e.courseSlug,a;return new P.a({itemId:t,courseId:n,courseSlug:r}).getWithUserCourseItemId(N,{fields:["secret","issuedTo","issuedAt","expiresAt"]})},newToken:function newToken(e){var t=e.itemId,n=e.courseId,r=e.courseSlug,a=e.verifiableId,i=new P.a({itemId:t,courseId:n,courseSlug:r}),o=null,s={courseId:n,itemId:t,learnerId:I.a.get().id,verifiableId:a||null};return i.create(N,s,null,!1)}},x=L,B=L.get,D=L.newToken,M="onDemandProgrammingUngradedScriptTokens.v1",G={get:function get(e){var t=e.itemId,n=e.courseId,r=e.courseSlug,a;return new P.a({itemId:t,courseId:n,courseSlug:r}).getWithUserCourseItemId(M,{fields:["secret","issuedTo","issuedAt","expiresAt"]})},newToken:function newToken(e){var t=e.itemId,n=e.courseId,r=e.courseSlug,a=new P.a({itemId:t,courseId:n,courseSlug:r}),i=null,o={courseId:n,itemId:t,learnerId:I.a.get().id};return a.create(M,o,null,!1)}},V=G,W=G.get,U=G.newToken,E=t("kgYC"),F=t("BBzL"),q=t.n(F),z,H,Q=function container(e){return Object(d.c)(z||(z=c()(["\n    border: 1px solid ",";\n    border-radius: ",";\n    padding: ",";\n  "])),e.palette.gray[500],e.spacing(4),e.spacing(16))},Y=function title(e){return Object(d.c)(H||(H=c()(["\n    margin-bottom: ",";\n  "])),e.spacing(8))},J,X=function SubmissionInstructionsBox(e){var t=e.instructions,n=e.title,r=e.children,a=e.className,i=Object(E.a)();return Object(d.d)("div",{css:Q(i),className:a},Object(d.d)(y.a,{variant:"h3semibold",css:Y(i),"data-e2e":"submission-instructions-title"},n||q()("How to submit")),Object(d.d)(y.a,{variant:"body1"},t),r)},K=t("ardU"),R,Z,ee,te,ne={gradedProgramming:x,ungradedProgramming:V},re={tokenContainer:function tokenContainer(e){return Object(d.c)(R||(R=c()(["\n    margin: "," 0;\n  "])),e.spacing(24))},tokenValueContainer:function tokenValueContainer(e){return Object(d.c)(Z||(Z=c()(["\n    margin-right: ",";\n  "])),e.spacing(24))}},ae=function(e){function ScriptTokenBox(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={agreementComplete:!1,currentTime:Date.now(),error:null,fullName:"",generatingToken:!1,isVerifying:!1,state:"ready",token:{}},t.onSubmitHonorCodeAgreement=function(){var e=t.state.fullName;t.setState({generatingToken:!0}),Object(A.a)().then((function(n){Object(A.b)(n,e).then((function(e){t.generateToken(e.get("id")),t.setState({isVerifying:!1,generatingToken:!1,agreementComplete:!1})}))}))},t.onTokenNotFound=function(){t.isGraded()?t.setState({state:"displaying"}):t.generateToken()},t.onTokenGenerated=function(){t.loadToken()},t.onFailedTokenGeneration=function(e){t.setState({state:"error",error:e})},t.onVerificationModalClose=function(){t.setState({isVerifying:!1})},t.onReceiveToken=function(e){t.setState({state:"displaying",token:e})},t.onHonorCodeAgreementComplete=function(e){t.setState({agreementComplete:!0,fullName:e})},t.onHonorCodeAgreementIncomplete=function(){t.setState({agreementComplete:!1})},t.updateCurrentTime=function(){t.setState({currentTime:Date.now()})},t.verifyAndGenerateToken=function(e){e&&e.preventDefault(),t.isGraded()?t.setState({isVerifying:!0}):t.generateToken()},t.api={},t.currentTimeInterval=null,t}r()(ScriptTokenBox,e);var t=ScriptTokenBox.prototype;return t.componentDidMount=function componentDidMount(){var e,t=this.props.itemMetadata.getTypeName();this.api=ne[t],Object(v.a)(this.api,"Unknown assignment type: "+t),this.currentTimeInterval=window.setInterval(this.updateCurrentTime,1e3),this.loadToken()},t.componentWillUnmount=function componentWillUnmount(){this.currentTimeInterval&&clearInterval(this.currentTimeInterval)},t.loadToken=function loadToken(){this.setState({state:"getting"});var e=this.props.itemMetadata,t=e.get("id"),n=e.get("course").get("id"),r=e.get("course").get("slug");this.api.get({itemId:t,courseId:n,courseSlug:r}).then(w.a).then((function(e){return e.elements[0]})).then(this.onReceiveToken,this.onTokenNotFound).done()},t.generateToken=function generateToken(e){this.setState({state:"generating"});var t=this.props.itemMetadata,n=t.get("id"),r=t.get("course").get("id"),a=t.get("course").get("slug");this.api.newToken({itemId:n,courseId:r,courseSlug:a,verifiableId:e}).then(this.onTokenGenerated,this.onFailedTokenGeneration)},t.isGraded=function isGraded(){var e;return"gradedProgramming"===this.props.itemMetadata.getTypeName()},t.render=function render(){var e=this.state,t=e.state,n=e.token,r=e.currentTime,a=e.isVerifying,i=e.error,o=e.agreementComplete,s=e.generatingToken,u=n&&n.expiresAt-r<=0;return Object(d.d)(X,{instructions:Object(d.d)(k.b,{message:"Copy the token below and run the submission script included in the assignment download. When prompted, use your email address {userEmailAddress}.",userEmailAddress:Object(d.d)("b",null,I.a.get().email_address)})},Object(d.d)("div",{css:re.tokenContainer},b()(["getting","generating"]).contains(t)&&Object(d.d)(y.a,{variant:"h2semibold"},q()("Loading token...")),b()(["displaying"]).contains(t)&&Object(d.d)(S.a,{container:!0,alignItems:"center"},n&&Object(d.d)("div",{css:re.tokenValueContainer},(!n.expiresAt||!u)&&Object(d.d)(y.a,{variant:"h2semibold"},n.secret),n.expiresAt&&!u&&Object(d.d)(y.a,{variant:"body1"},Object(d.d)(k.b,{message:q()("This token expires in {expirationTime}"),expirationTime:g()(n.expiresAt).fromNow(!0)})),n.expiresAt&&u&&Object(d.d)(y.a,{variant:"body1"},q()("Your token expired"))),Object(d.d)(T.a,{variant:"ghost",size:"small",icon:ee||(ee=Object(d.d)(O.a,{size:"small"})),iconPosition:"before",onClick:this.verifyAndGenerateToken},q()("Generate new token"))),b()(["error"]).contains(t)&&Object(d.d)("div",null,Object(d.d)(y.a,{variant:"body1"},Object(d.d)(k.b,{message:q()("There was an error getting your token: {error}"),error:i})),"Â ",Object(d.d)(T.a,{variant:"ghost",size:"small",icon:te||(te=Object(d.d)(O.a,{size:"small"})),iconPosition:"before",onClick:this.verifyAndGenerateToken},q()("Click here to try to get it again")))),Object(d.d)(y.a,{variant:"body1"},q()("Your submission token is unique to you and should not be shared with anyone. You may submit as many times as you like.")),a&&Object(d.d)(C.a,{className:"honor-code-modal",modalName:"Programming Assignment Token",handleClose:this.onVerificationModalClose},Object(d.d)(y.a,{variant:"h3semibold"},q()("Honor Code")),Object(d.d)(j.a,{onAgreementComplete:this.onHonorCodeAgreementComplete,onAgreementIncomplete:this.onHonorCodeAgreementIncomplete,isShownInsideModal:!0}),Object(d.d)("div",{className:"align-right"},Object(d.d)(T.a,{variant:"primary",disabled:!o||s,onClick:this.onSubmitHonorCodeAgreement},s?q()("Loading..."):q()("Continue")))))},ScriptTokenBox}(i.a.Component);ae.contextTypes={fluxibleContext:h.a.object.isRequired};var ie=ae,oe="onDemandProgrammingTokens.v1",se={get:function get(e){var t=e.itemId,n=e.courseId,r=e.courseSlug,a;return new P.a({itemId:t,courseId:n,courseSlug:r}).getWithCourseItemId(oe)},newToken:function newToken(e){var t=e.itemId,n=e.courseId,r=e.courseSlug,a,i=null,o={courseId:n,itemId:t};return new P.a({itemId:t,courseId:n,courseSlug:r}).create(oe,o,null,!1)}},ue=se,ce=se.get,de=se.newToken,le,me,ge,pe={tokenContainer:function tokenContainer(e){return Object(d.c)(le||(le=c()(["\n    margin: "," 0;\n  "])),e.spacing(24))},tokenValueContainer:function tokenValueContainer(e){return Object(d.c)(me||(me=c()(["\n    margin-right: ",";\n  "])),e.spacing(24))}},he,fe=function(e){function TokenBox(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={secret:"",status:"empty"},t.handleClickGenerateToken=function(e){e.preventDefault(),t.generateToken()},t.handleClickGetToken=function(e){e.preventDefault(),t.getToken()},t}r()(TokenBox,e);var t=TokenBox.prototype;return t.componentDidMount=function componentDidMount(){this.getToken()},t.getToken=function getToken(){var e=this,t=this.props.itemMetadata;return this.setState({status:"getting"}),ue.get({itemId:t.get("id"),courseId:t.get("course.id"),courseSlug:t.get("course.slug")}).then((function(t){var n=t.elements[0];e.setState({secret:n.token||n.secret,status:"displaying"})}),(function(t){return 404===t.status?e.generateToken():e.setState({status:"error"})})).done()},t.generateToken=function generateToken(){var e=this,t=this.props.itemMetadata;return this.setState({status:"generating"}),ue.newToken({itemId:t.get("id"),courseId:t.get("course.id"),courseSlug:t.get("course.slug")}).then((function(t){var n=t.body.elements[0];e.setState({secret:n.token||n.secret,status:"displaying"})})).done()},t.render=function render(){var e=this.state,t=e.secret,n=e.status;return Object(d.d)(X,{instructions:Object(d.d)("div",null,q()("Copy the token below and run the submission script included in the assignment download. When prompted, use your email address "),Object(d.d)("b",null,I.a.get().email_address),".")},Object(d.d)("div",{css:pe.tokenContainer},"empty"===n&&Object(d.d)(y.a,{variant:"body1"},q()("no token")),"getting"===n&&Object(d.d)(y.a,{variant:"body1"},q()("Getting token...")),"generating"===n&&Object(d.d)(y.a,{variant:"body1"},q()("Generating token...")),"displaying"===n&&Object(d.d)(S.a,{container:!0,alignItems:"center"},Object(d.d)("div",{css:pe.tokenValueContainer},Object(d.d)(y.a,{variant:"h2semibold"},t)),Object(d.d)(y.a,{variant:"body1"},Object(d.d)("button",{type:"button",onClick:this.handleClickGenerateToken},q()("Generate new token")))),"error"===n&&Object(d.d)(S.a,{container:!0,alignItems:"center"},Object(d.d)("div",{css:pe.tokenValueContainer},Object(d.d)(y.a,{variant:"body1"},q()("There was an error getting your token:"))),Object(d.d)(T.a,{variant:"ghost",size:"small",icon:ge||(ge=Object(d.d)(O.a,{size:"small"})),iconPosition:"before",onClick:this.handleClickGetToken},q()("Click here to try to get it again")))),Object(d.d)(y.a,{variant:"body1"},q()("Your submission token is unique to you and should not be shared with anyone. You may submit as many times as you like.")))},TokenBox}(i.a.Component),be=t("6aOg"),ve=t("fw5G"),ke=t.n(ve),Ie=t("S+eF"),ye=t.n(Ie),Se=t("DnuM"),Te=t("++Ya"),Oe=Object(Se.a)("/api/workspaceMetadata.v1",{type:"rest"}),je=Object(Se.a)("/api/workspaceLaunch.v1",{type:"rest"}),we=function checkedPromise(e){return ye()(e).done(),e},Ae=function getWorkspace(e,t){var n=(new ke.a).addQueryParam("q","user").addQueryParam("userId",String(e)).addQueryParam("templateId",t);return we(ye()(Oe.get(n.toString())).then((function(e){return e&&e.elements&&e.elements[0]})))},Ce=function createWorkspace(e,t){var n=new ke.a,r={templateId:t,owners:[e],publishDestinations:[]};return we(ye()(Oe.post(n.toString(),{data:r})).then((function(e){return e&&e.elements&&e.elements[0]})))},Pe=function getOrCreateWorkspace(e,t){return we(Ae(e,t).then((function(n){return n||Ce(e,t)})))},Ne=function getWorkspaceLaunchUrl(e,t){var n=Object(Te.c)([I.a.get().id,e]),r=(new ke.a).addQueryParam("action","launch").addQueryParam("userWorkspaceId",n).addQueryParam("itemId",t);return we(ye()(je.post(r.toString())))},Le,xe=function(e){function SleuthWorkspaceButton(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).getLaunchUrl=function(){var e=t.props,n=e.templateId,r=e.itemId,a=I.a.get().id;return t.workspacePromise||(t.workspacePromise=Pe(a,n)),t.workspacePromise.then((function(e){var t=e.id;return Ne(t,r)})).then((function(e){return e.url}))},t.workspacePromise=void 0,t}var t;return r()(SleuthWorkspaceButton,e),SleuthWorkspaceButton.prototype.render=function render(){return i.a.createElement(be.a,{appName:q()("Sleuth Game"),getLaunchUrl:this.getLaunchUrl,trackingName:"sleuth_launch_button"})},SleuthWorkspaceButton}(a.Component),Be=t("uMx8"),De,Me={submissionInstructionsBox:function submissionInstructionsBox(e){return Object(d.c)(De||(De=c()(["\n    margin-top: ",";\n  "])),e.spacing(32))}},Ge,Ve=function Instructions(e){var t=e.instructions,n=e.itemMetadata,r=e.labLauncher,a=e.learnerAssignment,i=n.get("course.id"),o=n.get("id"),s=Object(Be.a)(i,o),u=n.getTypeName(),c=Object(Be.b)(i,o),m="programming"===u,g=("gradedProgramming"===u||"ungradedProgramming"===u)&&"script"===(null==a?void 0:a.submissionBuilderSchema.get("typeName")),p,h=!m&&!g&&!(c||r);return Object(d.d)("div",{"data-e2e":"programming-instructions"},t&&Object(d.d)(l.a,{cml:t.get("assignmentInstructions"),isCdsEnabled:!0}),Object(d.d)("div",{css:Me.submissionInstructionsBox},s&&s.templateId&&Object(d.d)(xe,{templateId:s.templateId,itemId:o}),m&&Object(d.d)(fe,{itemMetadata:n}),g&&Object(d.d)(ie,{itemMetadata:n}),h&&Object(d.d)(X,{instructions:Object(d.d)("div",null,q()('When you\'re ready to submit, you can upload files for each part of the assignment on the "My submissions" tab.'))})))},We=t("TSOT"),Ue=Object(We.a)("/api/onDemandProgrammingImmediateInstructions.v1/",{type:"rest"}),data_immediate_instructions=function(e){var t=e.courseId,n=e.itemId,r=Te.a.tupleToStringKey([t,n]),a=new ke.a(r);return Ue.get(a.toString())},Ee=t("/KA1"),promises_immediate_instructions=function(e){return I.a.isAuthenticatedUser()?data_immediate_instructions(e).then(w.a).then((function(e){var t=e.elements[0];return new Ee.a(t,{parse:!0})})):ye()({})},Fe=t("jYVy"),qe;t.d(e,"ProgrammingInstructions",(function(){return ze}));var ze=function(e){function ProgrammingInstructions(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLoaded:!1,instructions:null,learnerAssignment:null,labLauncher:null},t}r()(ProgrammingInstructions,e);var t=ProgrammingInstructions.prototype;return t.componentDidMount=function componentDidMount(){this.fetchData()},t.fetchData=function fetchData(){var e=this,t=this.props.itemMetadata,n=t.get("id"),r=t.get("course.id");if("programming"===t.getTypeName()){var a=promises_immediate_instructions({itemMetadata:t,courseId:r,itemId:n});Promise.resolve(a).then((function(t){e.setState({isLoaded:!0,instructions:t})}))}else{var i=Object(Fe.a)({itemId:n,courseId:r,courseSlug:t.get("course.slug")});Promise.resolve(i).then((function(t){var a;return"workspace"===t.submissionBuilderSchema.get("typeName")?Object(s.h)(r,n).then((function(n){e.setState({isLoaded:!0,instructions:t.submissionLearnerSchema.get("instructions"),learnerAssignment:t,labLauncher:n})})):Promise.resolve().then((function(){e.setState({isLoaded:!0,instructions:t.submissionLearnerSchema.get("instructions"),learnerAssignment:t})}))})).catch((function(e){throw e}))}},t.render=function render(){var e=this.props.itemMetadata,t=this.state,n=t.isLoaded,r=t.instructions,a=t.learnerAssignment,s=t.labLauncher;return i.a.createElement("div",{className:"rc-ProgrammingInstructions"},n?i.a.createElement(Ve,{instructions:r,itemMetadata:e,labLauncher:s,learnerAssignment:a}):qe||(qe=i.a.createElement(o.a,null)))},ProgrammingInstructions}(a.Component),He=e.default=ze},"6aOg":function(module,e,t){"use strict";var n=t("lSNA"),r=t.n(n),a=t("q1tI"),i=t.n(a),o=t("TSYQ"),s=t.n(o),u=t("uhOI"),c=t("gNwb"),d=t("VbXa"),l=t.n(d),m=function(e){function LabLauncher(t){var n;return(n=e.call(this,t)||this).handleApiButtonClick=function(){var e;if(n.state.apiStatus!==u.a)return Promise.resolve();var t=window.open("","_blank"),r=function handleFailure(){return null==t||t.close(),n.resetApiStatusAfterDelay(),n.handleApiError(),n.setApiStatus(u.b)};return n.setApiStatus(u.c).then((function(){var e;return(0,n.props.getLaunchUrl)()})).then((function(e){var a=n.props,i=a.onLaunch,o=a.onComplete;if(e)return n.resetApiStatusAfterDelay(),t&&(t.location.href=e),null==i||i(e),null==o||o(),n.setApiStatus(u.d);r()}),r).catch(r)},n.handleApiError=function(){var e=n.props,t=e.onError,r=e.onComplete;null==t||t(),null==r||r()},n.setApiStatus=function(e){return new Promise((function(t){n.setState({apiStatus:e},(function(){t()}))}))},n.resetApiStatus=function(){clearTimeout(n.resetApiStatusTimeoutId),n.resetApiStatusTimeoutId=0,n.setApiStatus(u.a)},n.resetApiStatusAfterDelay=function(){var e=n.props.resetApiStatusDelay;n.resetApiStatusTimeoutId=window.setTimeout(n.resetApiStatus,e)},n.resetApiStatusTimeoutId=0,n.state={apiStatus:u.a,onClick:n.handleApiButtonClick},n}var t;return l()(LabLauncher,e),LabLauncher.prototype.render=function render(){var render=this.props.render;return render(this.state)},LabLauncher}(a.Component);m.defaultProps={resetApiStatusDelay:5e3};var g=m,p=t("TSwX"),h=t("BBzL"),f=t.n(h),b=Object(c.d)({type:"BUTTON"})(p.a),v=function getApiButtonLabel(e,t,n){var a,i;return(a={},r()(a,u.a,n||(t?f()("Open #{appName}",{appName:t}):f()("Open"))),r()(a,u.c,f()("Opening...")),r()(a,u.d,t?f()("Opened #{appName}",{appName:t}):f()("Opened")),r()(a,u.b,t?f()("Error opening #{appName}",{appName:t}):f()("Error")),a)[e]},k=function WorkspaceButton(e){var t=e.className,n=e.getLaunchUrl,r=e.resetApiStatusDelay,a=e.appName,o=e.label,u=e.icon,c=e.variant,d=e.size,l=e.role,m=void 0===l?"button":l,p=e.trackingName,h=void 0===p?"workspace_launch_button":p;return(i.a.createElement("div",{className:s()(t)},i.a.createElement(g,{getLaunchUrl:n,resetApiStatusDelay:r,render:function render(e){var t=e.apiStatus,n=e.onClick;return(i.a.createElement(b,{label:v(t,a,o),variant:c,onClick:n,apiStatus:t,beforeSendIcon:u,size:d,trackingName:h,iconPosition:"after",role:m}))}})))},I=e.a=k},GqiX:function(module,exports,e){},"O+1n":function(module,e,t){"use strict";var n=t("S+eF"),r=t.n(n),a=t("sQ/U"),i=t("k8gO"),o=t("welz"),s,u,c=t.n(o).a.Model.extend({});t.d(e,"a",(function(){return d})),t.d(e,"b",(function(){return l}));var d=function fetchVerifiableId(){var e=a.a.get().id;return r.a.resolve("".concat(Object(i.a)(),"~").concat(e))},l=function verifyAssignment(e,t){var n=a.a.get().id;return r.a.resolve(new c({isApprovedForVerificationState:!0,verifiableId:e.split("~")[0],nextVerificationState:"Success",id:e,userId:n,expiresAt:Date.now()+2592e6}))},m=function verifyAssignmentWithViewModel(e){l(e.get("verifiableId")).then((function(){e.trigger("verificationComplete",{hasVerified:!0})})).done()},g=function fetchVerifiableIdAndVerifyAssignment(e){d().then((function(t){return e.set("verifiableId",t),e})).then(m)}},WFBc:function(module,e,t){"use strict";function assert(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Error;if(!e)throw"string"==typeof t?new Error(t):t;return e}t.d(e,"a",(function(){return assert}))},ardU:function(module,exports,e){e("GqiX")},uMx8:function(module,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return s}));var n=t("3tO9"),r=t.n(n),a=t("UDqv"),i={templateId:"IIknfCCpTv2JJ3wgqU79KA"},o=function getSleuthConfig(e,t){var n,o=(a.a.get("sleuthAssignments")||[]).find((function(n){return n.courseId===e&&n.itemId===t}));return o?r()(r()({},i),o):null},s=function isSleuthAssignment(e,t){return!!o(e,t)}}}]);
//# sourceMappingURL=89.898940e9e3eaed941799.js.map